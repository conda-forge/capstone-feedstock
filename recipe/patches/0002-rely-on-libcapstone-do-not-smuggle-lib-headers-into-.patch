From 27db5f60f7a5485e1be7e1aad68e0a44c40f3dba Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Thu, 25 Dec 2025 17:59:42 +1100
Subject: [PATCH 2/3] rely on libcapstone, do not smuggle lib & headers into
 python bindings

---
 bindings/python/capstone/__init__.py | 4 ++++
 bindings/python/setup.py             | 3 ---
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/bindings/python/capstone/__init__.py b/bindings/python/capstone/__init__.py
index 47f2924b..0ac5ab0d 100755
--- a/bindings/python/capstone/__init__.py
+++ b/bindings/python/capstone/__init__.py
@@ -392,6 +392,10 @@ _cs = None
 # - last-gasp attempt at some hardcoded paths on darwin and linux
 
 _path_list = [os.getenv('LIBCAPSTONE_PATH', None),
+              # unix
+              join(os.getenv('CONDA_PREFIX'), "lib"),
+              # windows
+              join(os.getenv('CONDA_PREFIX'), "Library", "bin"),
               str(resources.files(__name__) / "lib"),
               join(split(__file__)[0], 'lib'),
               '',
diff --git a/bindings/python/setup.py b/bindings/python/setup.py
index 79b59cf1..caf31929 100755
--- a/bindings/python/setup.py
+++ b/bindings/python/setup.py
@@ -230,9 +230,6 @@ setup(
     cmdclass=cmdclass,
     zip_safe=False,
     include_package_data=True,
-    package_data={
-        "capstone": ["lib/*", "include/capstone/*"],
-    },
     install_requires=[
         "importlib_resources;python_version<'3.9'",
     ],
